{% extends "base.html" %}
{% block title %}{{ challenge.title }}{% endblock %}

{% block content %}
<div class="container">
  <h1>{{ challenge.title }}</h1>
  <p>{{ challenge.description }}</p>
  <p>{{ challenge.points }} pts</p>

  {% if not unlocked %}
    <p style="color:red;">üîí This challenge is locked.</p>

  {% elif submission %}
    {% if submission.is_approved %}
      <p style="color:lime;">‚úÖ You passed this challenge!</p>
    {% else %}
      <p style="color:red;">‚ùå Your solution did not pass. Try again.</p>

      <form method="post" action="{% url 'skilltrack_challenges:submit_challenge' challenge.id %}">
        {% csrf_token %}
        <textarea name="solution" rows="6" required></textarea>
        <br><br>
        <button type="submit">Try Again</button>
      </form>
    {% endif %}

  {% else %}
    <!-- üî• CE CAS MANQUAIT -->
    <form method="post" action="{% url 'skilltrack_challenges:submit_challenge' challenge.id %}">
      {% csrf_token %}
      <textarea name="solution" rows="6" required></textarea>
      <br><br>
      <button type="submit">Submit</button>
    </form>
  {% endif %}

  <br>
  <a href="{% url 'skilltrack_challenges:challenges_list' %}">‚¨Ö Back</a>
</div>
{% endblock %}

